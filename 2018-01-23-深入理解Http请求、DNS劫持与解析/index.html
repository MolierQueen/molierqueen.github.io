<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Molier" href="https://oliverqueen.cn/rss.xml"><link rel="alternate" type="application/atom+xml" title="Molier" href="https://oliverqueen.cn/atom.xml"><link rel="alternate" type="application/json" title="Molier" href="https://oliverqueen.cn/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://oliverqueen.cn/2018-01-23-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Http%E8%AF%B7%E6%B1%82%E3%80%81DNS%E5%8A%AB%E6%8C%81%E4%B8%8E%E8%A7%A3%E6%9E%90/"><title>深入理解 Http 请求、DNS 劫持与解析 - iOS 开发 | Molier = Molier = Tomorrow is another day</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">深入理解 Http 请求、DNS 劫持与解析</h1><div class="meta"><span class="item" title="创建时间：2018-01-23 18:12:18"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2018-01-23T18:12:18+08:00">2018-01-23</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>3.1k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>3 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Molier</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/6833939bly1gipeybxm1pj20zk0m8niv.jpg"></li><li class="item" data-background-image="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/6833939bly1gipesng5oej20zk0m87d4.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/MolierQueen/resource@main/1347194229302.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/MolierQueen/resource@main/134719477569.jpg"></li><li class="item" data-background-image="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/6833939bly1gipeu7txpzj20zk0m81kx.jpg"></li><li class="item" data-background-image="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/6833939bly1gipeuibk9fj20zk0m8ay2.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/ios/" itemprop="item" rel="index" title="分类于 iOS 开发"><span itemprop="name">iOS 开发</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://oliverqueen.cn/2018-01-23-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Http%E8%AF%B7%E6%B1%82%E3%80%81DNS%E5%8A%AB%E6%8C%81%E4%B8%8E%E8%A7%A3%E6%9E%90/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="Molier"><meta itemprop="description" content="Tomorrow is another day, iOS 开发 移动 App 博客 杂谈 随笔 相册"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Molier"></span><div class="body md" itemprop="articleBody"><h3 id="背景"><a class="anchor" href="#背景">#</a> 背景</h3><p>前段时间在处理 iOS 端的 HTTPDNS 相关 SDK，在接入和测试环节发现大家对 HTTP 的整体请求流程包括 HTTP 劫持原理以及 HTTPDNS 的工作原理并不是太清楚，所以写下这边文章帮助大家深入 web 请求过程：如何发起请求，HTTP 协议解析，DNS 域名解析。</p><h3 id="http发起一个请求过程"><a class="anchor" href="#http发起一个请求过程">#</a> HTTP 发起一个请求过程</h3><p>当我们在手机端请求一个 @&quot;<span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20=">www.baidu.com</span>&quot; 的域名的时候</p><ul><li><p>1. 请求到达运营商的 DNS 服务器并由其把这个域名解析成对应的 IP 地址。</p></li><li><p>2. 根据 IP 地址在互联网上找到对应的服务器，向这个服务器发起一个 get\post 请求。</p></li><li><p>3. 由这个服务器找到对应的资源原路返回给访问的用户。<br><span id="more"></span></p></li></ul><p>这里只是一个大概的流程实际每一步都有复杂的结构和逻辑例如：服务器可能有很多台，到底指定哪台服务器来处理请求，需要一个负载均衡设备来平均分配所有用户的请求。请求的数据是存储在分布式缓存中还是一个静态文件中，或是在数据库里。当数据返回浏览器时，浏览器解析数据发现还有一些静态资源（如 CSS、JS 或者图片）时又会发起另外的 HTTP 请求，而这些请求很可能会在 CDN 上，那么 CDN 服务器上又会处理这个用户的请求。</p><h3 id="http劫持"><a class="anchor" href="#http劫持">#</a> HTTP 劫持</h3><p>我们使用 HTTPDNS 的主要目的就是解决 HTTP 劫持问题。HTTP 的劫持分两种第一种是 DNS 劫持，第二种是内容劫持，后者是基于前者的基础上发展出来，是比较高级的劫持手段，目前无解，下面来分开讲解：</p><h6 id="1dns劫持"><a class="anchor" href="#1dns劫持">#</a> 1：DNS 劫持</h6><ul><li><p>劫持流程<br>DNS 劫持又称<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOUYlOUYlRTUlOTAlOEQlRTUlOEElQUIlRTYlOEMlODE=">域名劫持</span>，是指在劫持的网络范围内拦截域名解析的请求，分析请求的域名，把审查范围以外的请求放行，否则返回假的 IP 地址或者什么都不做使请求失去响应，其效果就是对特定的网络不能访问或访问的是假网址。其实本质就是对 DNS 解析服务器做手脚，或者是使用伪造的 DNS 解析服务器可以通过下图来展示</p><p><img data-src="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mqqoqxrj30yg0gt7oj.jpg" alt="DNS劫持原理"></p><p>从图中可以看出红色的是劫持的流程，劫持后将你的请求转发到一个虚假的服务器。</p></li><li><p>解决办法</p><ul><li><p>DNS 的劫持过程是通过攻击运营商的解析服务器来达到目的。我们可以不用运营商的 DNS 解析而使用自己的解析服务器或者是提前在自己的 App 中将解析好的域名以 IP 的形式发出去就可以绕过运营商 DNS 解析，这样一来也避免了 DNS 劫持的问题。</p></li><li><p>HttpDNS 是使用 HTTP 协议向 DNS 服务器的 80 端口进行请求，代替传统的 DNS 协议向 DNS 服务器的 53 端口进行请求，绕开了运营商的 Local DNS，从而避免了使用运营商 Local DNS 造成的劫持和跨网问题</p></li></ul></li></ul><h6 id="2内容劫持"><a class="anchor" href="#2内容劫持">#</a> 2：内容劫持</h6><ul><li><p>劫持流程<br>内容劫持网上很少有提到，这也是在做 httpDNS SDK 所遇到的一个问题，其实内容劫持一开始的出发点是好的，是运营商为了加快用户的访问速度同时减少自己的流量损耗而做的一个缓存机制，用户在像服务器请求数据的时候运营商会把用户的请求转移到这个缓存池中，如果缓存中有就直接返回，没有的话再去像服务器请求然后拦截并缓存服务端给用户的回调数据，这样一来可以极大的降低运营商像服务器请求的次数，也能加快用户的访问，所以出发点是好，但是一些非法的商家对缓存池内部做一些处理就是直接对返回的内容进行修改，这样一来我们就会接受到错误的数据</p><p><img data-src="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mtjymehj30yg0h3tob.jpg" alt="内容劫持"></p><p>黄色线条就是比价危险的了，因为回调的数据很可能已经被篡改过。</p></li><li><p>解决办法：<br>现在暂时无法通过 HTTPdns 和其他手段解决，不过这样的劫持不是很多。</p></li></ul><h3 id="dns解析过程"><a class="anchor" href="#dns解析过程">#</a> DNS 解析过程</h3><p>如果是 iOS 设备请直接跳到第三步骤</p><ul><li><p>1. 系统会检查浏览器缓存中有没有这个域名对应的解析过的 IP 地址，如果缓存中有，这个解析过程就将结束。浏览器缓存是受这个域名的失效时间和缓存的空间大小控制的。</p></li><li><p>2. 如果用户的浏览器缓存中没有，浏览器会查找操作系统缓存中即为本地的 Host 文件。</p></li><li><p>3. 如果本地 Host 文件中没有那么操作系统会把这个域名发送给这里设置的 LocalDNS，也就是本地区的域名服务器。这个 DNS 通常都提供给你本地互联网接入的一个 DNS 解析服务。这个专门的域名解析服务器性能都会很好，它们一般都会缓存域名解析结果，当然缓存时间是受域名的失效时间控制的，一般缓存空间不是影响域名失效的主要因素。大约 90% 的域名解析都到这里就已经完成了，所以 LDNS 主要承担了域名的解析工作。</p></li><li><p>4. 如果 LDNS 仍然没有命中，就直接到 Root Server 域名服务器请求解析</p></li><li><p>5. 根域名服务器返回给本地域名服务器一个所查询的域的主域名服务器（gTLD Server）地址。gTLD 是国际顶级域名服务器，<span class="exturl" data-url="aHR0cDovL3huLS1idnMuY29t">如.com</span>，.cn、.org 等。全球只有 13 台左右。</p></li><li><p>6. 本地域名服务器（Local DNS Server）再向上一步返回的 gTLD 服务器发送请求。</p></li><li><p>7. 接受请求的 gTLD 服务器查找并返回此域名对应的 Name Server 域名服务器的地址，这个 Name Server 通常就是你注册的域名服务器，例如你在某个域名服务提供商申请的域名，那么这个域名解析任务就由这个域名提供商的服务器来完成</p></li><li><p><span class="exturl" data-url="aHR0cDovLzguTmFtZQ==">8.Name</span> Server 域名服务器会查询存储的域名和 IP 的映射关系表，正常情况下都根据域名得到目标 IP 记录，连同一个 TTL 值返回给 DNS Server 域名服务器。</p></li><li><p>9. 返回该域名对应的 IP 和 TTL 值，Local DNS Server 会缓存这个域名和 IP 的对应关系，缓存的时间由 TTL 值控制。</p></li><li><p>10. 把解析的结果返回给用户，用户根据 TTL 值缓存在本地系统缓存中，域名解析过程结束。<br>以上的流程可以简化为下图</p></li></ul><p><img data-src="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mu9fg86j30yg0k41hd.jpg" alt="DNS解析"></p><p>绿色的为非 iOS 设备的操作流程</p><h3 id="cdn工作机制"><a class="anchor" href="#cdn工作机制">#</a> CDN 工作机制</h3><h6 id="cdn简介"><a class="anchor" href="#cdn简介">#</a> CDN 简介</h6><p>CDN，全称 Content Delivery Network，根本的作用是将网站的内容发布到最接近用户的网络 “边缘”，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。他 - 有别于镜像，它比镜像更智能，可以这样做一个比喻：CDN = 镜像（Mirror） + 缓存（cache） + 整体负载均衡（GSLB），因而，CDN 可以明显提高 Internet 中信息流动的效率。目前 CDN 都以缓存网站中的静态数据为主，如 CSS、JS、图片和静态网页等数据。用户在从主站服务器请求到动态内容后再从 CDN 上下载这些静态数据，从而加速网页数据内容的下载速度，如淘宝有 90% 以上的数据都是由 CDN 来提供的。这里引用一个网上比较形象的例子：<strong>A 家的网速 100M 的，但他只用了 10M 的速度，B 家的网速是 10M 的，但是他需要 15M 的速度才行。怎么办呢。 C 是一家 CDN 服务商，在 A 家有个节点（就像 A 是一个赞助商一样）B 在 C 家买了 CDN 加速服务。当 B 的速度不够的时候，CDN 加速就会选择有节余的节点来帮 B，提高 B 的速度。这样 B 的速度就能达到或超过 15M ，A 没浪费，B 速度有了，C 赚了钱，皆大欢喜。 当 C 的节点在全国都有，非常多的时候。那么你用 C 家的 CDN 加速服务，你就会健步如飞了</strong>。</p><h6 id="cdn工作流程"><a class="anchor" href="#cdn工作流程">#</a> CDN 工作流程</h6><p>一个用户访问某个静态文件（如 CSS），<span class="exturl" data-url="aHR0cDovL3huLS13d3ctaTY4ZG0wYjE5Y2c3a3NwaTIwZDk3dm9rbzAwYjI2OWc0ZDlkNXJ4YS5iYWlkdS5jb20=">这个静态文件的域名假如是 www.baidu.com</span>，而这个域名最终会被指向 CDN 全局中 CDN 负载均衡服务器，再由这个负载均衡服务器来最终分配是哪个地方的访问用户，返回给离这个访问用户最近的 CDN 节点。之后用户就直接去这个 CDN 节点访问这个静态文件了，如果这个节点中请求的文件不存在，就会再回到源站去获取这个文件，然后再返回给用户。</p><h6 id="负载均衡"><a class="anchor" href="#负载均衡">#</a> 负载均衡</h6><p>负载均衡就是对工作任务进行平衡、分摊到多个操作单元上执行，如图片服务器、应用服务器等，共同完成工作任务。它可以提高服务器响应速度及利用效率，避免软件或者硬件模块出现单点失效，解决网络拥塞问题，实现地理位置无关性，为用户提供较一致的访问质量。<br>CDN 整体的工作流程可以大概归为下图：</p><p><img data-src="https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mup956fj30yg0f5wx0.jpg" alt="image.png"></p><h3 id="总结"><a class="anchor" href="#总结">#</a> 总结</h3><p>以上就是 Http 请求的一些理解，如果有不对的地方及时与我来沟通。</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-12-30 22:16:08" itemprop="dateModified" datetime="2023-12-30T22:16:08+08:00">2023-12-30</time> </span><span id="2018-01-23-深入理解Http请求、DNS劫持与解析/" class="item leancloud_visitors" data-flag-title="深入理解 Http 请求、DNS 劫持与解析" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Molier 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Molier 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Molier <i class="ic i-at"><em>@</em></i>Molier</li><li class="link"><strong>本文链接：</strong> <a href="https://oliverqueen.cn/2018-01-23-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Http%E8%AF%B7%E6%B1%82%E3%80%81DNS%E5%8A%AB%E6%8C%81%E4%B8%8E%E8%A7%A3%E6%9E%90/" title="深入理解 Http 请求、DNS 劫持与解析">https://oliverqueen.cn/2018-01-23-深入理解Http请求、DNS劫持与解析/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;MolierQueen&#x2F;resource@main&#x2F;beihaiting%20(3).jpg" title="在iOS11下app图标变空白的问题解决"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> iOS 开发</span><h3>在iOS11下app图标变空白的问题解决</h3></a></div><div class="item right"><a href="/2018-01-23-CFNetwork%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.cdnjson.com&#x2F;tvax3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gipew8gmvyj20zk0m87wh.jpg" title="CFNetwork的介绍和使用"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> iOS 开发</span><h3>CFNetwork的介绍和使用</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8F%91%E8%B5%B7%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">HTTP 发起一个请求过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8A%AB%E6%8C%81"><span class="toc-number">3.</span> <span class="toc-text">HTTP 劫持</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1dns%E5%8A%AB%E6%8C%81"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">1：DNS 劫持</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E5%86%85%E5%AE%B9%E5%8A%AB%E6%8C%81"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">2：内容劫持</span></a></li></ol></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#dns%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">4.</span> <span class="toc-text">DNS 解析过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdn%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6"><span class="toc-number">5.</span> <span class="toc-text">CDN 工作机制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#cdn%E7%AE%80%E4%BB%8B"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">CDN 简介</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#cdn%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">5.0.0.2.</span> <span class="toc-text">CDN 工作流程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">5.0.0.3.</span> <span class="toc-text">负载均衡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%F0%9F%98%8A/" rel="bookmark" title="位运算的简单理解😊">位运算的简单理解😊</a></li><li><a href="/2018-01-23-IOS%E4%B8%8B%E4%B8%89%E7%A7%8DDNS%E8%A7%A3%E6%9E%90%E6%96%B9%E5%BC%8F%E5%88%86%E6%9E%90%EF%BC%88LocalDns%EF%BC%89/" rel="bookmark" title="IOS下三种DNS解析方式分析（LocalDns）">IOS下三种DNS解析方式分析（LocalDns）</a></li><li><a href="/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" rel="bookmark" title="在iOS11下app图标变空白的问题解决">在iOS11下app图标变空白的问题解决</a></li><li class="active"><a href="/2018-01-23-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Http%E8%AF%B7%E6%B1%82%E3%80%81DNS%E5%8A%AB%E6%8C%81%E4%B8%8E%E8%A7%A3%E6%9E%90/" rel="bookmark" title="深入理解Http请求、DNS劫持与解析">深入理解Http请求、DNS劫持与解析</a></li><li><a href="/2018-01-23-CFNetwork%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8/" rel="bookmark" title="CFNetwork的介绍和使用">CFNetwork的介绍和使用</a></li><li><a href="/2018-01-23-%E5%85%B3%E4%BA%8E%E8%A7%86%E5%9B%BE%E5%9C%A8%E5%88%87%E5%9C%86%E8%A7%92%E6%97%B6%E5%80%99%E7%9A%84%E5%AF%BC%E8%87%B4%E7%9A%84%E6%80%A7%E8%83%BD%E4%B8%8B%E9%99%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8E%A2%E8%AE%A8/" rel="bookmark" title="关于视图在切圆角时候的导致的性能下降的一些探讨">关于视图在切圆角时候的导致的性能下降的一些探讨</a></li><li><a href="/2018-01-23-%E5%85%B3%E4%BA%8E%E7%89%A9%E7%90%86%E6%95%88%E6%9E%9C%E7%9A%84%E5%8A%A8%E7%94%BB%E5%BC%95%E6%93%8EUIDynamic%E4%BB%8B%E7%BB%8D/" rel="bookmark" title="关于物理效果的动画引擎UIDynamic介绍">关于物理效果的动画引擎UIDynamic介绍</a></li><li><a href="/2018-01-23-iOS%E4%B8%AD%E4%BD%BF%E7%94%A8OpenGL%E5%AE%9E%E7%8E%B0%E5%A2%9E%E9%AB%98%E5%8A%9F%E8%83%BD/" rel="bookmark" title="iOS中使用OpenGL实现增高功能">iOS中使用OpenGL实现增高功能</a></li><li><a href="/2018-01-24-%E8%AE%B0%E4%B8%80%E6%AC%A1Runtime-Hook%E7%9A%84%E9%97%AE%E9%A2%98/" rel="bookmark" title="记一次Runtime Hook的问题">记一次Runtime Hook的问题</a></li><li><a href="/2018-01-24-iOS-Runtime%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%8D%E5%90%8C%E7%B1%BB%E7%9A%84Method-Swizzling/" rel="bookmark" title="iOS Runtime简单介绍，以及不同类的Method Swizzling">iOS Runtime简单介绍，以及不同类的Method Swizzling</a></li><li><a href="/2018-01-24-NSURLProtocol%E5%AF%B9WKWebView%E7%9A%84%E5%A4%84%E7%90%86/" rel="bookmark" title="NSURLProtocol对WKWebView的处理">NSURLProtocol对WKWebView的处理</a></li><li><a href="/2018-01-24-%E8%87%AA%E5%AE%9A%E4%B9%89AlertView/" rel="bookmark" title="自定义AlertView">自定义AlertView</a></li><li><a href="/2018-01-24-%E5%9C%A8iOS%E5%B7%A5%E7%A8%8B%E4%B8%ADCocoapods%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="bookmark" title="在iOS工程中Cocoapods的使用">在iOS工程中Cocoapods的使用</a></li><li><a href="/2018-01-24-%E5%8F%AF%E8%83%BD%E6%98%AF%E6%9C%80%E5%85%A8%E7%9A%84iOS%E7%AB%AFHttpDns%E9%9B%86%E6%88%90%E6%96%B9%E6%A1%88/" rel="bookmark" title="可能是最全的iOS端HttpDns集成方案">可能是最全的iOS端HttpDns集成方案</a></li><li><a href="/2018-02-08-%E5%85%B3%E4%BA%8EiPhone-X%E4%B8%8BHome%E9%94%AE%E7%9A%84%E9%9A%90%E8%97%8F%E5%92%8C%E5%BB%B6%E8%BF%9F%E5%93%8D%E5%BA%94/" rel="bookmark" title="关于iPhone X下Home键的隐藏和延迟响应">关于iPhone X下Home键的隐藏和延迟响应</a></li><li><a href="/2018-03-14-Simple-HotFix-Mtehod/" rel="bookmark" title="简单的iOS线上热修复方案">简单的iOS线上热修复方案</a></li><li><a href="/2018-03-30-AlamoFire/" rel="bookmark" title="AlamoFire的使用(下载队列，断点续传)">AlamoFire的使用(下载队列，断点续传)</a></li><li><a href="/2018-06-19-MusicAbout/" rel="bookmark" title="关于实现唱吧清唱功能的理解">关于实现唱吧清唱功能的理解</a></li><li><a href="/2018-08-22-GitFlow/" rel="bookmark" title="GitFlow流程">GitFlow流程</a></li><li><a href="/2021-05-05-iOS-Crash%E9%98%B2%E6%8A%A4%E4%BD%A0%E7%9C%8B%E8%BF%99%E4%B8%AA%E5%B0%B1%E5%A4%9F%E4%BA%86-%E4%B8%8B%E7%AF%87/" rel="bookmark" title="iOS Crash防护你看这个就够了-下篇">iOS Crash防护你看这个就够了-下篇</a></li><li><a href="/2021-07-27-%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E4%B8%80%E5%9C%BAPresentation/" rel="bookmark" title="如何做好一场Presentation">如何做好一场Presentation</a></li><li><a href="/2022-05-26-Apple%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/" rel="bookmark" title="Apple登录流程详解">Apple登录流程详解</a></li><li><a href="/2022-06-13-WWDC2022-iOS%E7%AF%87%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90/" rel="bookmark" title="WWDC2022-iOS篇完全解析">WWDC2022-iOS篇完全解析</a></li><li><a href="/iPa%E9%80%86%E5%90%91%E4%B9%8B%E8%B7%AF/" rel="bookmark" title="iPa逆向之路">iPa逆向之路</a></li><li><a href="/How-to-create-a-Swift-Command-Line-tool/" rel="bookmark" title="How to create Swift CLI">How to create Swift CLI</a></li><li><a href="/2021-05-03-iOS%20Crash%E9%98%B2%E6%8A%A4%E4%BD%A0%E7%9C%8B%E8%BF%99%E4%B8%AA%E5%B0%B1%E5%A4%9F%E4%BA%86-%E4%B8%8A%E7%AF%87/" rel="bookmark" title="iOS Crash防护你看这个就够了 - 上篇">iOS Crash防护你看这个就够了 - 上篇</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Molier" data-src="/images/avatar.jpeg"><p class="name" itemprop="name">Molier</p><div class="description" itemprop="description">iOS 开发 移动 App 博客 杂谈 随笔 相册</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">40</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">53</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item 新浪微博" data-url="aHR0cHM6Ly93ZWliby5jb20vemhhbmduaW5naGFvP3JlZmVyX2ZsYWc9MTAwNTA1NTAxMF8=" title="https:&#x2F;&#x2F;weibo.com&#x2F;zhangninghao?refer_flag&#x3D;1005055010_"><i class="ic i-weibo"></i></span> <span class="exturl item jianshu" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vdS9mZDIxZjQxZmI1MjI=" title="https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;fd21f41fb522"><i class="ic i-link"></i></span> <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vbGllclF1ZWVu" title="https:&#x2F;&#x2F;github.com&#x2F;MolierQueen"><i class="ic i-github"></i></span> <span class="exturl item juejin" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vdXNlci81ODZjNjI0YmFjNTAyZTEyZDYzMTU0NWY=" title="https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;586c624bac502e12d631545f"><i class="ic i-link"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjM3MTA5OTY5NEBxcS5jb20=" title="mailto:371099694@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>朋友们</a></li></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2018-01-23-CFNetwork%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/2018-01-23-IOS%E4%B8%8B%E4%B8%89%E7%A7%8DDNS%E8%A7%A3%E6%9E%90%E6%96%B9%E5%BC%8F%E5%88%86%E6%9E%90%EF%BC%88LocalDns%EF%BC%89/" title="IOS下三种DNS解析方式分析（LocalDns）">IOS下三种DNS解析方式分析（LocalDns）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 闲谈">闲谈</a></div><span><a href="/2018-02-12-At-The-End-Of-2017/" title="At The End Of 2017">At The End Of 2017</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机基础">计算机基础</a></div><span><a href="/2020-11-19-%E6%B1%87%E7%BC%96%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E8%A7%84%E5%88%99/" title="汇编寄存器的规则">汇编寄存器的规则</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/iPa%E9%80%86%E5%90%91%E4%B9%8B%E8%B7%AF/" title="iPa逆向之路">iPa逆向之路</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/2018-02-08-%E5%85%B3%E4%BA%8EiPhone-X%E4%B8%8BHome%E9%94%AE%E7%9A%84%E9%9A%90%E8%97%8F%E5%92%8C%E5%BB%B6%E8%BF%9F%E5%93%8D%E5%BA%94/" title="关于iPhone X下Home键的隐藏和延迟响应">关于iPhone X下Home键的隐藏和延迟响应</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/2018-01-24-%E8%87%AA%E5%AE%9A%E4%B9%89AlertView/" title="自定义AlertView">自定义AlertView</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="在iOS11下app图标变空白的问题解决">在iOS11下app图标变空白的问题解决</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 闲谈">闲谈</a></div><span><a href="/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E9%80%89%E6%8B%A9/" title="程序员如何进阶">程序员如何进阶</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ios/" title="分类于 iOS 开发">iOS 开发</a></div><span><a href="/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%F0%9F%98%8A/" title="位运算的简单理解😊">位运算的简单理解😊</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/common/" title="分类于 通用开发">通用开发</a></div><span><a href="/2018-01-25-%E5%8F%AF%E8%83%BD%E6%98%AF%E6%9C%80%E5%85%A8%E7%9A%84%E4%BD%BF%E7%94%A8HEXO%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/" title="可能是最全的使用HEXO搭建个人博客教程">可能是最全的使用HEXO搭建个人博客教程</a></span></li></ul></div></div><div class="status"><div class="copyright">&copy; 1992 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-"></i> </span><span class="author" itemprop="copyrightHolder">Molier @ Molier</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">217k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">3:18</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2018-01-23-深入理解Http请求、DNS劫持与解析/",favicon:{show:"MolierBolg",hide:"MolierBolg"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>