{
    "version": "https://jsonfeed.org/version/1",
    "title": "Molier • All posts by \"cocoapods\" tag",
    "description": "iOS 开发 移动App 博客 杂谈 随笔 相册",
    "home_page_url": "https://oliverqueen.cn",
    "items": [
        {
            "id": "https://oliverqueen.cn/2018-01-24-%E5%9C%A8iOS%E5%B7%A5%E7%A8%8B%E4%B8%ADCocoapods%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "url": "https://oliverqueen.cn/2018-01-24-%E5%9C%A8iOS%E5%B7%A5%E7%A8%8B%E4%B8%ADCocoapods%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "title": "在iOS工程中Cocoapods的使用",
            "date_published": "2018-01-24T04:42:28.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们在开发 iOS 程序的时候，往往都会根据需要导入很多的第三方框架，但是不同的框架完成的功能不同，所以导入的方式也不同，并不是把它直接拖进工程中就完事了，我们需要配置各种环境，链接各种库文件等等。有的时候我们并不能一个不漏的完成导入，而一旦出了问题，尤其是那些需要框架比较多的工程 (比如早期的百度地图框架)，将很难解决，而且，如果遇到了第三方库升级，更新了方法那么我们还需要把之前的旧版本删掉，再重复一下前面的工作，这将是非常的繁琐，极大地影响了开发的效率。这个时候我们就需要用到 cocoapods 来管理我们的第三方了，在我们有了 CocoaPods 这个工具之后，只需要将用到的第三方开源库放到一个名为 Podfile 的文件中，<br />\n<span id=\"more\"></span><br />\n 然后在命令行执行 $ pod install 命令。CocoaPods 就会自动将这些第三方开源库的源码下载下来，并且为我的工程设置好相应的系统依赖和编译参数，不管是导入还是更新或者移除，都是一句命令就搞定的。网上也有类似的教程，但是有些很旧，有些写的不详细，导致新手在使用的时候整的一头雾水，我就来说下。<br />\n### 第一步 ：<br />\n首先安装 cocoapods 要在 ruby 环境下进行，虽然我们的 mac 系统都是自带了 ruby，但是为了保险起见我们还是要先更新一下 ruby 环境：在这里我们直接使用   sudo gem update --system   命令来更新，网上有的说使用 gem update --system 前面少了 sudo，其实加 sudo 的目的就是用管理员的权限去执行这句更新命令，不加的话容易出现这个错误</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6jyxwn6cj30ta06kn1a.jpg\" alt=\"\" /></p>\n<p>意思是你没有权限去执行这个命令，等出现了 RubyGems system software updated 这句话的时候就证明升级成功了。</p>\n<p>### 第二步：<br />\n安装 cocoapods 时候我们要访问 cocoapods.org 这个网站，不用想这个网站已经被墙了，所以我们可以用淘宝的 ruby 的镜像来访问该网站。首先我们输入 gem sources -l 来看一下我们现在有什么，我目前里面只有一个</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6jzdqmrlj30ma03ydjy.jpg\" alt=\"\" /></p>\n<p>也就是我们需要的，不过可能有些人的里面不止一个，会有其他的东西，这时候我们先用 gem sources --remove XXXXXXXXXXXXXXX 来把其他的 source 删除掉，只保留这一个，如果没有的话就手动添加用这个命令 gem sources -a <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ydWJ5LnRhb2Jhby5vcmcv\">https://ruby.taobao.org/</span> 来将我们需要的源添加进去，最后再用那个查看命令 最后只有确保像我里面一样只有那一个就好，要注意的是 https  网上好多教程写的是 http，那个已经作废了</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6jzxkmf5j31kw0ask74.jpg\" alt=\"\" /></p>\n<h3 id=\"第三步\"><a class=\"anchor\" href=\"#第三步\">#</a> 第三步：</h3>\n<p>安装是 cocoapods 使用 sudo gem install cocoapods 命令来安装 cocoapods，你输入完这个命令回车后会提示你输入密码，这时候是没有光标提示的，也不会移动，凭感觉输入对之后就回车吧，然后就是等，时间长短是根据你的网速来的。安装完成后终端就进入待命阶段了。<br />\n### 第四步：<br />\n使用 search 命令来搜索类库，这个是支持模糊搜索的，记不清全名，打一部分名也行，不过那样的就要从搜出来的东西里找你想要的类库了。比如我想找 afnetworking 我就输入 pod search afn 回车后就会输出所有以 afn 开头的类库名字，像这样</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k0kkcjjj311u0wq4qp.jpg\" alt=\"\" /></p>\n<p>搜出很多，其中第三就是我们想要的，afnetworking，用红圈圈起来是一会编辑 podfile 时候需要用的，可以先把他复制下来省的手打，后面的小数代表的是类库的版本，一般是最新的显示在这里，下面的 version 是历史版本，如果有需要可以直接导入它的历史版本，就是把后面的版本号替换下就好。</p>\n<h6 id=\"值得注意的是如果你不是第一次安装cocoapods-那么之前的缓存会对你有影响search先清理下缓存-使用这个命之后就可以了-rm-~librarycachescocoapodssearch_indexjson\"><a class=\"anchor\" href=\"#值得注意的是如果你不是第一次安装cocoapods-那么之前的缓存会对你有影响search先清理下缓存-使用这个命之后就可以了-rm-~librarycachescocoapodssearch_indexjson\">#</a> 值得注意的是如果你不是第一次安装 cocoapods， 那么之前的缓存会对你有影响 search 先清理下缓存 使用这个命之后就可以了 rm ~/Library/Caches/CocoaPods/search_index.json</h6>\n<p>### 第五步：<br />\n进入你的工程目录，这里建议直接右键你工程中.xcodeproj 文件选择在终端中打开，然后 在终端中输入命令 cd ..  就会跳到.xcodeproj 所在的目录，也就是我们需要的目录，很多新手在这个地方容易出错。然后输入命令 vim Podfile 熟悉 Linux 的用户都知道这是创建一个 Podfile 文件并打开编辑，按 “i” 进入编辑模式，将第五部粘贴的东西拷贝进来，然后依次操作 esc 键  -&gt;  &quot;:&quot;  -&gt;  输入 wq</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k16wn0yj311s0wqth2.jpg\" alt=\"\" /></p>\n<p>然后输入命令来安装 pod update --verbose --no-repo-update 等待过后就安装完成啦，其实使用 pod install 也可以，只是后者需要更新一个仓库，这是相当耗时的，我们可以使用前者来避免更新仓库就好，很快就结束了。</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k1nkijrj311u0wq1g6.jpg\" alt=\"\" /></p>\n<p>安装成功！以后打卡工程就直接打开这个文件就好啦</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k1y1x80j306q0cb0sy.jpg\" alt=\"\" /></p>\n<p>其中 podfile 文件中显示了我们这个工程中所以集成的第三方，</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k27zcbxj30ln0bfmxn.jpg\" alt=\"\" /></p>\n<p>想修改版本的话就把后面的版本号改成你所需要的版本号就好，想删除的话就把这行删掉，想添加的话就用第五部的搜索命令去搜索然后同样把搜索结果中以 pod 开头的那句话复制进来就好。注意以上所有的增删改操作完成之后需要在去终端中相应的目录下使用 pod install --verbose --no-repo-update 命令来更新，这样才会真正的生效。</p>\n<h3 id=\"第六步\"><a class=\"anchor\" href=\"#第六步\">#</a> 第六步：</h3>\n<p>关于 cocoapods 的更新。有的时候在 pod install 的时候会出现 [!] The 'master' repo requires CocoaPods 0.32.1 - 这样的错误，是由于你 cocoapods 版本过低的原因，这时候需要进行更新，跟新的过程其实就是把以上所有的从新走一遍就相当于安装遍就好了。</p>\n<h5 id=\"值得注意1\"><a class=\"anchor\" href=\"#值得注意1\">#</a> 值得注意 1</h5>\n<p>经常遇到的错误比如下面这个</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k2hpy06j30ej01gt8q.jpg\" alt=\"\" /></p>\n<p>通常出现在 OS X 10.11 系统上 这是由于从这个系统开始苹果开始使用无根安装，这时你再用这个方法就会报这个错，这时只需</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k2pt7n9j30hy02zwev.jpg\" alt=\"\" /></p>\n<p>这个命令就可以成功升级啦</p>\n<h5 id=\"值得注意2\"><a class=\"anchor\" href=\"#值得注意2\">#</a> 值得注意 2</h5>\n<p>有的时候大家在 pod search 的时候搜不到，但是明明有这个类库别人都可以都到课时就是自己搜不到，其实原因是这样的：pod search 只会搜索你本地缓存的框架，如果你想搜索到最新的第三方框架或者某个框架的最新版本，必须先使用 pod repo update（推荐）或者 pod setup 将远程仓库的框架信息更新到本地。其实，从 pod search 的响应速度飞快，也可以猜出它并没有连接服务器，仅仅是搜索了本地的框架信息 [呵呵]<br />\n    此外，如果你的框架更新比较慢，可以尝试执行下面 2 条指令更换镜像服务器<br />\n 1：pod repo remove master<br />\n2：pod repo add master <span class=\"exturl\" data-url=\"aHR0cDovL2dpdC5vc2NoaW5hLm5ldC9ha3VhbmRldi9TcGVjcy5naXQ=\">http://git.oschina.net/akuandev/Specs.git</span><br />\n    更换镜像完毕后，以后执行 pod repo update 的速度就会快很多。在说明一点上面两条指令如果第二条无法执行提示 403 错误像这样</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6k2xgrwuj30i101h3yg.jpg\" alt=\"\" /></p>\n<p>那么在执行完第一条之后直接 pod search 命令就好 这样他会自动找合适的配置了，因为第二条那个网址可能会变。</p>\n<h3 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结：</h3>\n<p>关于使用 cocoapods 在自己的项目中集成第三方就这些内容。有什么不懂的欢迎来找我交流，本人才疏学浅，如果那里写的不对请及时批评指正，免得误导新人。 新浪微博小耗子上桌子也是我，大家也可以去看下微博多多关注 谢谢！</p>\n",
            "tags": [
                "Cocoapods",
                "架构"
            ]
        },
        {
            "id": "https://oliverqueen.cn/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/",
            "url": "https://oliverqueen.cn/2018-01-23-%E5%9C%A8iOS11%E4%B8%8Bapp%E5%9B%BE%E6%A0%87%E5%8F%98%E7%A9%BA%E7%99%BD%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/",
            "title": "在iOS11下app图标变空白的问题解决",
            "date_published": "2018-01-23T10:07:50.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"背景\"><a class=\"anchor\" href=\"#背景\">#</a> 背景：</h2>\n<p>最近在做项目的时候发现运行在模拟器上图标丢失，变成了苹果默认的白板图标。因为一开始只在模拟器上出现，而且也确认没有人动过图标文件，所以没有在意，后来慢慢的该问题出现在真机上，一开始是只有 iPhone X，然后就是 iPhone 8，慢慢的变成不管是模拟器还是真机，所有 iOS11 系统的图标都没有了。接下来影响到的机型和系统越来越多。<br />\n<span id=\"more\"></span></p>\n<h2 id=\"尝试\"><a class=\"anchor\" href=\"#尝试\">#</a> 尝试：</h2>\n<p>1：一开始想到的是可能有人误改了图标文件，于是删除了 images.xcassest 中的 AppIcon 文件，从新生成→添加图标，但是依然未解决。（✘）</p>\n<p>2：想到是图片格式 / 尺寸的问题，于是所有图片按照规定重新生成，但是仍然无济于事。（✘）</p>\n<p>3：因为设置图标的方法除了在 images.xcassest 中的 AppIcon 文件中设置还可以在 info.plist 设置、或者直接在工程里面放一个 icon.png 的图片来设</p>\n<p>置，所以都检查了一便发现也不是这个原因（✘）</p>\n<p>3：重置手机。(✘)</p>\n<h2 id=\"解决\"><a class=\"anchor\" href=\"#解决\">#</a> 解决：</h2>\n<p>google 了下发现好多国外的开发遇到这个问题，并且都是使用 xcode9.X.X 版本，所以怀疑是苹果的 BUG</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mw7fbitj30yg0b0dip.jpg\" alt=\"image.png\" /></p>\n<p>不过这个问题并不是谁都会出现也不是所有使用 xcode9 + iOS11 的设备都会出现</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mwjg45nj30yg09kq41.jpg\" alt=\"image.png\" /></p>\n<p>后来经过大家的讨论终于有人说这个其实是 cocoapods 的 BUG，暂时并不能通过更新 cocoapods 更新来解决，因为最新版的 cocoapods</p>\n<p>也存在这个问题，解决方法如下：</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mwrgqg2j30yg0bqdl4.jpg\" alt=\"image.png\" /></p>\n<p>在你的 podfile 中加入以下代码就可以了</p>\n<p><figure class=\"highlight haxe\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">post_install <span class=\"keyword\">do</span> |installer|</span><br><span class=\"line\">    copy_pods_resources_path = <span class=\"string\">&quot;Pods/Target Support Files/Pods-工程名/Pods-工程名-resources.sh&quot;</span></span><br><span class=\"line\">    string_to_replace = <span class=\"string\">&#x27;--compile &quot;<span class=\"subst\">$&#123;BUILT_PRODUCTS_DIR&#125;</span>/<span class=\"subst\">$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;</span>&quot;&#x27;</span></span><br><span class=\"line\">    assets_compile_with_app_icon_arguments = <span class=\"string\">&#x27;--compile &quot;<span class=\"subst\">$&#123;BUILT_PRODUCTS_DIR&#125;</span>/<span class=\"subst\">$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;</span>&quot; --app-icon &quot;<span class=\"subst\">$&#123;ASSETCATALOG_COMPILER_APPICON_NAME&#125;</span>&quot; --output-partial-info-plist &quot;<span class=\"subst\">$&#123;BUILD_DIR&#125;</span>/assetcatalog_generated_info.plist&quot;&#x27;</span></span><br><span class=\"line\">    text = File.read(copy_pods_resources_path)</span><br><span class=\"line\">    <span class=\"keyword\">new</span><span class=\"type\">_contents</span> = text.gsub(string_to_replace, assets_compile_with_app_icon_arguments)</span><br><span class=\"line\">    File.open(copy_pods_resources_path, <span class=\"string\">&quot;w&quot;</span>) &#123;|file| file.puts <span class=\"keyword\">new</span><span class=\"type\">_contents</span> &#125;</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure></p>\n<p>像这样：</p>\n<p><img data-src=\"https://cdn.cdnjson.com/tvax3.sinaimg.cn/large/006tNc79gy1fo6mx84vaxj30yg07f42t.jpg\" alt=\"image.png\" /></p>\n",
            "tags": [
                "xcode",
                "cocoapods",
                "podfile"
            ]
        }
    ]
}